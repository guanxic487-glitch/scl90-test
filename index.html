<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>SCL-90 å¿ƒç†å¥åº·æ·±åº¦è¯„ä¼°ç³»ç»Ÿ</title>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        /* === 1. å…¨å±€æ ·å¼å˜é‡ === */
        :root {
            --primary: #4f46e5;       /* ä¸»è‰² */
            --primary-light: #e0e7ff; 
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --text-main: #1e293b;
            --text-sub: #64748b;
            --bg-grad: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        html { font-size: 16px; }
        @media (max-width: 600px) { html { font-size: 14px; } }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background: var(--bg-grad);
            color: var(--text-main);
            margin: 0;
            padding: 20px 10px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
        }

        /* ä¸»å®¹å™¨ */
        .container {
            width: 100%;
            max-width: 800px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 1rem;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            margin-top: 1vh;
            padding-bottom: 2rem;
            position: relative; /* å…³é”®ï¼šä¸ºäº†è¦†ç›–ç™»å½•å±‚ */
        }

        /* === æ–°å¢ï¼šå…‘æ¢ç ç™»å½•å±‚æ ·å¼ === */
        #login-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(240, 242, 245, 0.98); /* ä¸é€æ˜èƒŒæ™¯æŒ¡ä½åé¢ */
            z-index: 9999; /* ä¿è¯åœ¨æœ€ä¸Šå±‚ */
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .login-card {
            background: white;
            padding: 2.5rem;
            border-radius: 1rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
            text-align: center;
        }
        .login-input {
            width: 100%;
            padding: 12px;
            margin: 20px 0;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1.1rem;
            outline: none;
            text-align: center;
            letter-spacing: 2px;
            transition: border 0.3s;
            box-sizing: border-box; /* é˜²æ­¢paddingæ’‘å¤§ */
        }
        .login-input:focus { border-color: var(--primary); }
        .error-msg { color: var(--danger); font-size: 0.9rem; height: 20px; margin-bottom: 5px; }

        /* === è¿›åº¦æ¡ === */
        .progress-box {
            position: sticky;
            top: 0;
            background: rgba(255,255,255,0.98);
            z-index: 50;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .progress-track {
            flex: 1;
            height: 0.6rem;
            background: #f1f5f9;
            border-radius: 1rem;
            margin: 0 1rem;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: var(--primary);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 1rem;
        }

        /* === é€šç”¨åŠæŒ‰é’® === */
        .content-area { padding: 2rem; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        h1 { font-size: 1.8rem; margin: 0 0 1rem 0; color: var(--primary); text-align: center; }
        .btn {
            display: block;
            width: 100%;
            padding: 1rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 0.8rem;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 1rem;
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
        }
        .btn:hover { background: #4338ca; transform: translateY(-2px); }
        .btn:active { transform: scale(0.98); }

        /* === é¢˜ç›®ä¸é€‰é¡¹ === */
        .question-card {
            background: #fff;
            padding: 1.5rem;
            border-radius: 0.8rem;
            margin-bottom: 1.5rem;
            border: 1px solid #f1f5f9;
        }
        .q-text { font-size: 1.2rem; font-weight: 600; margin-bottom: 1.5rem; color: #1e293b; }
        .options-group { display: flex; flex-wrap: wrap; gap: 0.8rem; }
        .option-item { flex: 1; min-width: 70px; cursor: pointer; position: relative; }
        .option-item input { position: absolute; opacity: 0; }
        .option-box {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            padding: 0.8rem 0.2rem; background: #fff; border: 2px solid #e2e8f0; border-radius: 0.6rem; transition: all 0.2s;
        }
        .option-val { font-size: 1.2rem; font-weight: bold; margin-bottom: 2px; }
        .option-label { font-size: 0.75rem; color: #94a3b8; }
        .option-item input:checked + .option-box {
            border-color: var(--primary); background: var(--primary-light); color: var(--primary);
        }

        /* === ç»“æœé¡µ === */
        .chart-container { position: relative; width: 100%; height: 0; padding-bottom: 75%; margin: 0 auto 2rem auto; }
        .chart-container canvas { position: absolute; top: 0; left: 0; width: 100% !important; height: 100% !important; }
        .result-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; }
        .factor-card { background: #fff; border-radius: 0.8rem; padding: 1.5rem; border: 1px solid #e2e8f0; position: relative; overflow: hidden; }
        .factor-card::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 5px; background: #cbd5e1; }
        .factor-card.status-normal::before { background: var(--success); }
        .factor-card.status-mild::before { background: var(--warning); }
        .factor-card.status-heavy::before { background: var(--danger); }
        .f-header { display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 0.8rem; }
        .f-name { font-size: 1.1rem; font-weight: bold; }
        .f-score { font-size: 1.5rem; font-family: monospace; font-weight: 700; }
        .f-desc { font-size: 0.9rem; color: #64748b; background: #f8fafc; padding: 10px; border-radius: 6px; margin-top: 10px; }
        
        .hidden { display: none !important; }
        .tag { padding: 2px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: bold; }
    </style>
</head>
<body>

    <div id="login-overlay">
        <div class="login-card">
            <div style="font-size: 3rem; margin-bottom: 10px;">ğŸ”</div>
            <h2 style="margin: 0; color: var(--text-main);">è¯·è¾“å…¥æµ‹è¯•å…‘æ¢ç </h2>
            <p style="color: var(--text-sub); margin-top: 5px;">æœ¬æµ‹è¯•ä¸ºå†…éƒ¨é‚€è¯·åˆ¶</p>
            
            <input type="text" id="code-input" class="login-input" placeholder="æ­¤å¤„è¾“å…¥å…‘æ¢ç " maxlength="20">
            <div id="login-msg" class="error-msg"></div>
            
            <button class="btn" onclick="verifyCode()">ç«‹å³éªŒè¯</button>
        </div>
    </div>

<div class="container">
    
    <div id="welcome-screen" class="content-area hidden" style="text-align: center;">
        <div style="font-size: 4rem; margin-bottom: 1rem;">ğŸ§ </div>
        <h1>SCL-90 å¿ƒç†å¥åº·è‡ªæµ‹</h1>
        <p style="font-size: 1.1rem;">ä¸“ä¸šç‰ˆ Â· 90é¡¹æŒ‡æ ‡ Â· æ™ºèƒ½æ·±åº¦è§£è¯»</p>
        
        <div style="text-align: left; background: #fff; padding: 20px; border-radius: 12px; margin: 30px 0; border: 1px solid #e2e8f0;">
            <h3 style="margin-top:0; color:var(--text-main);">ğŸ“ æµ‹å‰é¡»çŸ¥</h3>
            <ul style="padding-left: 20px; color: var(--text-sub); margin-bottom: 0;">
                <li>è¯·æ ¹æ®æ‚¨<strong>æœ€è¿‘ä¸€å‘¨</strong>ï¼ˆåŒ…æ‹¬ä»Šå¤©ï¼‰çš„å®é™…æ„Ÿå—è¿›è¡Œè¯„åˆ†ã€‚</li>
                <li>è¯„åˆ†æ ‡å‡†ï¼š1åˆ†(ä»æ— ) â†’ 5åˆ†(ä¸¥é‡)ã€‚</li>
                <li>æœ¬æµ‹è¯•ç»“æœä»…ä¾›è‡ªæˆ‘å‚è€ƒï¼Œä¸¥ç¦ç”¨äºä¸´åºŠè¯Šæ–­ã€‚</li>
            </ul>
        </div>
        
        <button class="btn" onclick="startTest()">å¼€å§‹æµ‹è¯•</button>
    </div>

    <div id="quiz-screen" class="hidden">
        <div class="progress-box">
            <span style="font-weight:bold; color:var(--primary)" id="progress-text">1 / 90</span>
            <div class="progress-track">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
        </div>
        <div class="content-area" id="questions-container"></div>
        <div style="padding: 0 2rem 2rem 2rem;">
            <button class="btn" onclick="calculateResult()">æäº¤å¹¶æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Š</button>
        </div>
    </div>

    <div id="result-screen" class="content-area hidden">
        <h1>ğŸ“Š æ‚¨çš„å¿ƒç†å¥åº·ç”»åƒ</h1>
        <p style="text-align: center; font-size: 0.9rem;">ç”Ÿæˆæ—¶é—´ï¼š<span id="report-date"></span></p>
        <div class="chart-container">
            <canvas id="radarChart"></canvas>
        </div>
        <h2>å› å­æ·±åº¦è§£è¯»</h2>
        <div id="result-grid" class="result-grid"></div>
        <div style="margin-top: 3rem; padding: 15px; background: #fff1f2; border: 1px solid #fda4af; border-radius: 8px; color: #be123c; font-size: 0.9rem;">
            <strong>âš ï¸ ç‰¹åˆ«æé†’ï¼š</strong>
            <p style="margin: 5px 0 0 0;">
                å¿ƒç†æµ‹è¯•ç»“æœå—ç¯å¢ƒã€æƒ…ç»ªç­‰å¤šç§å› ç´ å½±å“ã€‚å¦‚å¾—åˆ†è¾ƒé«˜ä¸”ç—›è‹¦ï¼Œè¯·å‰å¾€æ­£è§„åŒ»é™¢å°±è¯Šã€‚
            </p>
        </div>
        <button class="btn" style="background: #94a3b8; margin-top: 30px;" onclick="location.reload()">é‡æ–°æµ‹è¯•</button>
    </div>

</div>

<script>
    // ==========================================
    //    âš ï¸ 1. ç®¡ç†å‘˜è®¾ç½®åŒº (å…‘æ¢ç åœ¨è¿™é‡Œä¿®æ”¹)
    // ==========================================
    
    // è¯·åœ¨ä¸‹æ–¹å¼•å·å†…å¡«å…¥ä½ æƒ³è¦çš„å…‘æ¢ç ï¼Œç”¨é€—å·éš”å¼€
    const validCodes = ["VIP888", "SCL2024", "TEST001"]; 

    // ==========================================
    //    2. éªŒè¯é€»è¾‘åŒº
    // ==========================================

    // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥ï¼šå¦‚æœå·²ç»è¾“å¯¹è¿‡ï¼Œç›´æ¥æ”¾è¡Œ
    window.onload = function() {
        const isVerified = localStorage.getItem('scl90_code_verified');
        if (isVerified === 'yes') {
            document.getElementById('login-overlay').classList.add('hidden');
            document.getElementById('welcome-screen').classList.remove('hidden');
        }
    };

    // éªŒè¯æŒ‰é’®ç‚¹å‡»è§¦å‘
    function verifyCode() {
        const input = document.getElementById('code-input').value.trim(); // è·å–è¾“å…¥å¹¶å»ç©ºæ ¼
        const msg = document.getElementById('login-msg');

        // æ£€æŸ¥è¾“å…¥æ˜¯å¦åœ¨ validCodes æ•°ç»„é‡Œ
        if (validCodes.includes(input)) {
            // éªŒè¯æˆåŠŸ
            localStorage.setItem('scl90_code_verified', 'yes'); // è®°å½•çŠ¶æ€
            document.getElementById('login-overlay').style.display = 'none'; // éšè—ç™»å½•å±‚
            document.getElementById('welcome-screen').classList.remove('hidden'); // æ˜¾ç¤ºæ¬¢è¿é¡µ
        } else {
            // éªŒè¯å¤±è´¥
            msg.innerText = "âŒ å…‘æ¢ç æ— æ•ˆï¼Œè¯·æ£€æŸ¥è¾“å…¥";
            document.getElementById('code-input').value = ''; // æ¸…ç©ºè¾“å…¥æ¡†
            document.getElementById('code-input').focus();
        }
    }

    // ==========================================
    //    3. æ ¸å¿ƒæ•°æ®ä¸é€»è¾‘ (æ— éœ€ä¿®æ”¹)
    // ==========================================
    const factors = {
        "èº¯ä½“åŒ–": [1, 4, 12, 27, 40, 42, 48, 49, 52, 53, 56, 58],
        "å¼ºè¿«ç—‡çŠ¶": [3, 9, 10, 28, 38, 45, 46, 51, 55, 65],
        "äººé™…å…³ç³»æ•æ„Ÿ": [6, 21, 34, 36, 37, 41, 61, 69, 73],
        "æŠ‘éƒ": [5, 14, 15, 20, 22, 26, 29, 30, 31, 32, 54, 71, 79],
        "ç„¦è™‘": [2, 17, 23, 33, 39, 57, 72, 78, 80, 86],
        "æ•Œå¯¹": [11, 24, 63, 67, 74, 81],
        "ææ€–": [13, 25, 47, 50, 70, 75, 82],
        "åæ‰§": [8, 18, 43, 68, 76, 83],
        "ç²¾ç¥ç—…æ€§": [7, 16, 35, 62, 77, 84, 85, 87, 88, 90],
        "å…¶ä»–": [19, 44, 59, 60, 64, 66, 89] 
    };

    const questionTextList = [
        "å¤´ç—›", "ç¥ç»è¿‡æ•ï¼Œå¿ƒä¸­ä¸è¸å®", "å¤´è„‘ä¸­æœ‰ä¸å¿…è¦çš„æƒ³æ³•æˆ–å­—å¥ç›˜æ—‹", "å¤´æ™•æˆ–æ˜å€’", "å¯¹å¼‚æ€§çš„å…´è¶£å‡é€€", 
        "å¯¹æ—äººè´£å¤‡æ±‚å…¨", "æ„Ÿåˆ°åˆ«äººèƒ½æ§åˆ¶æ‚¨çš„æ€æƒ³", "è´£æ€ªåˆ«äººåˆ¶é€ éº»çƒ¦", "å¿˜æ€§å¤§", "æ‹…å¿ƒè‡ªå·±çš„è¡£é¥°æ•´é½åŠä»ªæ€çš„ç«¯åº„", 
        "å®¹æ˜“çƒ¦æ¼å’Œæ¿€åŠ¨", "èƒ¸ç—›", "å®³æ€•ç©ºæ—·çš„åœºæ‰€æˆ–è¡—é“", "æ„Ÿåˆ°è‡ªå·±çš„ç²¾åŠ›ä¸‹é™ï¼Œæ´»åŠ¨å‡æ…¢", "æƒ³ç»“æŸè‡ªå·±çš„ç”Ÿå‘½", 
        "å¬åˆ°æ—äººå¬ä¸åˆ°çš„å£°éŸ³", "èº«ä½“é¢¤æŠ–", "æ„Ÿåˆ°ç»å¤§å¤šæ•°äººéƒ½ä¸å¯ä¿¡ä»»", "èƒƒå£ä¸å¥½", "å®¹æ˜“å“­æ³£", 
        "åŒå¼‚æ€§ç›¸å¤„æ—¶æ„Ÿåˆ°å®³ç¾ä¸è‡ªåœ¨", "æ„Ÿåˆ°å—éª—ï¼Œä¸­äº†åœˆå¥—æˆ–æœ‰äººæƒ³æŠ“ä½æ‚¨", "æ— ç¼˜æ— æ•…åœ°çªç„¶æ„Ÿåˆ°å®³æ€•", "è‡ªå·±å‘è„¾æ°”ï¼Œéš¾ä»¥æ§åˆ¶", "æ€•å•ç‹¬å‡ºé—¨", 
        "ç»å¸¸è´£æ€ªè‡ªå·±", "è…°ç—›", "æ„Ÿåˆ°éš¾ä»¥å®Œæˆä»»åŠ¡", "æ„Ÿåˆ°å­¤ç‹¬", "æ„Ÿåˆ°è‹¦é—·", 
        "è¿‡åˆ†æ‹…å¿§", "å¯¹äº‹ç‰©ä¸æ„Ÿå…´è¶£", "æ„Ÿåˆ°å®³æ€•", "æ‚¨çš„æ„Ÿæƒ…å®¹æ˜“å—åˆ°ä¼¤å®³", "æ—äººèƒ½çŸ¥é“æ‚¨çš„ç§ä¸‹æƒ³æ³•", 
        "æ„Ÿåˆ°åˆ«äººä¸ç†è§£æ‚¨ã€ä¸åŒæƒ…æ‚¨", "æ„Ÿåˆ°äººä»¬å¯¹æ‚¨ä¸å‹å¥½ï¼Œä¸å–œæ¬¢æ‚¨", "åšäº‹å¿…é¡»åšå¾—å¾ˆæ…¢ä»¥ä¿è¯åšå¾—æ­£ç¡®", "å¿ƒè·³å¾—å¾ˆå‰å®³", "æ¶å¿ƒæˆ–èƒƒéƒ¨ä¸èˆ’æœ", 
        "æ„Ÿåˆ°æ¯”ä¸ä¸Šåˆ«äºº", "è‚Œè‚‰é…¸ç—›", "æ„Ÿåˆ°æœ‰äººåœ¨ç›‘è§†æ‚¨ã€è°ˆè®ºæ‚¨", "éš¾ä»¥å…¥ç¡", "åšäº‹å¿…é¡»åå¤æ£€æŸ¥", 
        "éš¾ä»¥ä½œå‡ºå†³å®š", "æ€•ä¹˜ç”µè½¦ã€å…¬å…±æ±½è½¦ã€åœ°é“æˆ–ç«è½¦", "å‘¼å¸æœ‰å›°éš¾", "ä¸€é˜µé˜µå‘å†·æˆ–å‘çƒ­", "å› ä¸ºæ„Ÿåˆ°å®³æ€•è€Œé¿å¼€æŸäº›ä¸œè¥¿ã€åœºåˆæˆ–æ´»åŠ¨", 
        "è„‘å­å˜ç©ºäº†", "èº«ä½“å‘éº»æˆ–åˆºç—›", "å–‰å’™æœ‰æ¢—å¡æ„Ÿ", "æ„Ÿåˆ°æ²¡æœ‰å‰é€”æ²¡æœ‰å¸Œæœ›", "ä¸èƒ½é›†ä¸­æ³¨æ„åŠ›", 
        "èº«ä½“æŸä¸€éƒ¨åˆ†è½¯å¼±æ— åŠ›", "æ„Ÿåˆ°ç´§å¼ æˆ–å®¹æ˜“ç´§å¼ ", "æ„Ÿåˆ°æ‰‹æˆ–è„šå‘é‡", "æƒ³åˆ°æ­»äº¡çš„äº‹", "åƒå¾—å¤ªå¤š", 
        "å½“åˆ«äººçœ‹ç€æ‚¨æˆ–è°ˆè®ºæ‚¨æ—¶æ„Ÿåˆ°ä¸è‡ªåœ¨", "æœ‰ä¸€äº›ä¸å±äºæ‚¨è‡ªå·±çš„æƒ³æ³•", "æœ‰æƒ³æ‰“äººæˆ–ä¼¤å®³ä»–äººçš„å†²åŠ¨", "é†’å¾—å¤ªæ—©", "å¿…é¡»åå¤æ´—æ‰‹ã€ç‚¹æ•°ç›®æˆ–è§¦æ‘¸æŸäº›ä¸œè¥¿", 
        "ç¡å¾—ä¸ç¨³ï¼Œä¸æ·±", "æœ‰æƒ³æ‘”åæˆ–ç ´åä¸œè¥¿çš„å†²åŠ¨", "æœ‰ä¸€äº›åˆ«äººæ²¡æœ‰çš„æƒ³æ³•", "æ„Ÿåˆ°å¯¹åˆ«äººç¥ç»è¿‡æ•", "åœ¨å•†åº—æˆ–ç”µå½±é™¢ç­‰äººå¤šçš„åœ°æ–¹æ„Ÿåˆ°ä¸è‡ªåœ¨", 
        "æ„Ÿåˆ°ä»»ä½•äº‹æƒ…éƒ½å¾ˆå›°éš¾", "æ„Ÿåˆ°å¿ƒç¥ä¸å®", "æ„Ÿåˆ°åœ¨å…¬å…±åœºåˆåƒä¸œè¥¿å¾ˆä¸èˆ’æœ", "ç»å¸¸ä¸äººäº‰è®º", "å•ç‹¬ä¸€äººæ—¶ç¥ç»å¾ˆç´§å¼ ", 
        "åˆ«äººå¯¹æ‚¨çš„æˆç»©æ²¡æœ‰ä½œå‡ºæ°å½“çš„è¯„ä»·", "å³ä½¿å’Œåˆ«äººåœ¨ä¸€èµ·ä¹Ÿæ„Ÿåˆ°å­¤å•", "æ„Ÿåˆ°åç«‹ä¸å®‰ï¼Œå¿ƒçƒ¦æ„ä¹±", "æ„Ÿåˆ°è‡ªå·±æ²¡æœ‰ä»€ä¹ˆä»·å€¼", "æ„Ÿåˆ°ç†Ÿæ‚‰çš„ä¸œè¥¿å˜æˆé™Œç”Ÿæˆ–ä¸åƒæ˜¯çœŸçš„", 
        "å¤§å«æˆ–æ‘”ä¸œè¥¿", "å®³æ€•ä¼šåœ¨å…¬å…±åœºåˆæ™•å€’", "æ„Ÿåˆ°åˆ«äººæƒ³å æ‚¨çš„ä¾¿å®œ", "ä¸ºä¸€äº›æœ‰å…³æ€§çš„å¿µå¤´è€Œå¾ˆè‹¦æ¼", "æ‚¨è®¤ä¸ºåº”è¯¥å› ä¸ºè‡ªå·±çš„è¿‡é”™è€Œå—åˆ°æƒ©ç½š", 
        "æ„Ÿåˆ°è¦èµ¶å¿«æŠŠäº‹æƒ…åšå®Œ", "æ„Ÿåˆ°è‡ªå·±çš„èº«ä½“æœ‰ä¸¥é‡é—®é¢˜", "ä»æœªæ„Ÿåˆ°å’Œå…¶ä»–äººå¾ˆäº²è¿‘", "æ„Ÿåˆ°æœ‰ç½ªæ¶æ„Ÿ", "æ„Ÿåˆ°è‡ªå·±çš„è„‘å­æœ‰æ¯›ç—…"
    ];

    const interpretations = {
        "èº¯ä½“åŒ–": { desc: "åæ˜ èº«ä½“ä¸é€‚æ„Ÿï¼Œå¦‚å¤´ç—›ã€è‚Œè‚‰é…¸ç—›ç­‰ã€‚", advice: ["èº«ä½“æ„Ÿè§‰è‰¯å¥½ã€‚", "è½»å¾®ä¸é€‚ï¼Œæ³¨æ„ä¼‘æ¯ã€‚", "èº«ä½“ä¸é€‚æ„Ÿæ˜æ˜¾ï¼Œå»ºè®®ä½“æ£€ã€‚", "ç—‡çŠ¶ä¸¥é‡å½±å“ç”Ÿæ´»ï¼Œè¯·ç«‹å³å°±åŒ»ã€‚"] },
        "å¼ºè¿«ç—‡çŠ¶": { desc: "æ˜çŸ¥æ²¡å¿…è¦ä½†æ— æ³•æ§åˆ¶çš„é‡å¤è¡Œä¸ºæˆ–æ€ç»´ã€‚", advice: ["æ€ç»´æ¸…æ™°ã€‚", "å¶å°”æœ‰é‡å¤å¿µå¤´ï¼Œå±æ­£å¸¸ã€‚", "å¼ºè¿«ç—‡çŠ¶è¾ƒæ˜æ˜¾ï¼Œå¹²æ‰°æ•ˆç‡ã€‚", "å¼ºè¿«ç—‡çŠ¶ä¸¥é‡ï¼Œè¯·å¯»æ±‚ä¸“ä¸šå’¨è¯¢ã€‚"] },
        "äººé™…å…³ç³»æ•æ„Ÿ": { desc: "äººé™…äº¤å¾€ä¸­çš„ä¸è‡ªåœ¨æ„Ÿå’Œè‡ªå‘æ„Ÿã€‚", advice: ["ç¤¾äº¤è‡ªä¿¡ã€‚", "å¶å°”å®³ç¾ã€‚", "äººé™…äº¤å¾€æ•æ„Ÿï¼Œæ˜“æ„Ÿè¢«è¯¯è§£ã€‚", "æåº¦è‡ªå‘ï¼Œå®³æ€•ç¤¾äº¤ï¼Œå»ºè®®å’¨è¯¢ã€‚"] },
        "æŠ‘éƒ": { desc: "è‹¦é—·çš„æƒ…æ„Ÿä½“éªŒï¼Œç”Ÿæ´»å…´è¶£å‡é€€ã€‚", advice: ["æƒ…ç»ªç§¯æç¨³å®šã€‚", "è½»å¾®æƒ…ç»ªä½è½ï¼Œå¤šè¿åŠ¨å€¾è¯‰ã€‚", "æ˜æ˜¾ä½è½å’ŒåŠ¨åŠ›ä¸è¶³ï¼Œè­¦æƒ•æŠ‘éƒã€‚", "æŠ‘éƒç—‡çŠ¶ä¸¥é‡ï¼Œè¯·ç«‹å³å¯»æ±‚åŒ»ç”Ÿå¸®åŠ©ã€‚"] },
        "ç„¦è™‘": { desc: "æ¸¸ç¦»ä¸å®šçš„ç„¦è™‘åŠæƒŠæå‘ä½œã€‚", advice: ["å¿ƒæ€å¹³å’Œã€‚", "è½»å¾®ç´§å¼ ï¼Œå¯èƒ½ä¸è¿‘æœŸå‹åŠ›æœ‰å…³ã€‚", "ç»å¸¸åç«‹ä¸å®‰ï¼Œç„¦è™‘å½±å“ç”Ÿæ´»ã€‚", "ç„¦è™‘ç¨‹åº¦å¾ˆé«˜ï¼Œè¯·åŠ¡å¿…é‡è§†ã€‚"] },
        "æ•Œå¯¹": { desc: "æ‘”ç‰©ã€äº‰æ–—å’Œä¸å¯æ§åˆ¶çš„è„¾æ°”ã€‚", advice: ["å¾…äººå‹å–„ã€‚", "å¶å°”çƒ¦èºã€‚", "æ˜“å†²åŠ¨äº‰è®ºï¼Œéœ€ç®¡ç†æƒ…ç»ªã€‚", "æ— æ³•æ§åˆ¶æ€’ç«ï¼Œæœ‰æ”»å‡»å†²åŠ¨ï¼Œéœ€å¹²é¢„ã€‚"] },
        "ææ€–": { desc: "å¯¹ç‰¹å®šåœºæ‰€æˆ–äº‹ç‰©çš„éç†æ€§ææƒ§ã€‚", advice: ["æ— æ˜æ˜¾ææƒ§ã€‚", "å¯¹ç‰¹å®šäº‹ç‰©è½»å¾®å®³æ€•ã€‚", "ææƒ§è¶…å‡ºæ­£å¸¸èŒƒå›´ï¼Œè¯•å›¾å›é¿ã€‚", "ä¸¥é‡ææƒ§ç—‡çŠ¶ï¼Œé™åˆ¶æ´»åŠ¨èŒƒå›´ã€‚"] },
        "åæ‰§": { desc: "çŒœç–‘å’Œå…³ç³»å¦„æƒ³ç­‰ã€‚", advice: ["ä¿¡ä»»ä»–äººã€‚", "å¶å°”è§‰å¾—è¢«é’ˆå¯¹ã€‚", "å¤šç–‘ï¼Œéš¾ä»¥ä¿¡ä»»ä»–äººã€‚", "çŒœç–‘å¿ƒç†ä¸¥é‡ï¼Œè®¤ä¸ºå‘¨å›´å……æ»¡æ•Œæ„ã€‚"] },
        "ç²¾ç¥ç—…æ€§": { desc: "å¹»å¬ã€æ€ç»´æ’­æ•£ç­‰ç—‡çŠ¶ã€‚", advice: ["æ— ç›¸å…³ç—‡çŠ¶ã€‚", "ç–²åŠ³ä¸‹æœ‰è½»å¾®è„±ç¦»ç°å®æ„Ÿã€‚", "æ€ç»´æ¨¡å¼å¼‚äºå¸¸äººï¼Œå»ºè®®å…³æ³¨ã€‚", "å¾—åˆ†é«˜ï¼Œå¯èƒ½å­˜åœ¨ç²¾ç¥ç—‡çŠ¶ï¼Œè¯·å°±åŒ»ã€‚"] },
        "å…¶ä»–": { desc: "ç¡çœ å’Œé¥®é£Ÿæƒ…å†µã€‚", advice: ["ç¡çœ é¥®é£Ÿæ­£å¸¸ã€‚", "è½»å¾®ç¡çœ /é¥®é£Ÿå›°æ‰°ã€‚", "é—®é¢˜æ˜æ˜¾ï¼Œå½±å“ç”Ÿæ´»ã€‚", "ä¸¥é‡ç¡çœ é¥®é£Ÿéšœç¢ï¼Œéœ€è°ƒæ•´ã€‚"] }
    };

    let userScores = new Array(90).fill(0);

    function startTest() {
        document.getElementById('welcome-screen').classList.add('hidden');
        document.getElementById('quiz-screen').classList.remove('hidden');
        renderQuestions();
        window.scrollTo(0,0);
    }

    function renderQuestions() {
        const container = document.getElementById('questions-container');
        let html = '';
        const opts = [{v:1,t:"ä»æ— "},{v:2,t:"è½»åº¦"},{v:3,t:"ä¸­åº¦"},{v:4,t:"åé‡"},{v:5,t:"ä¸¥é‡"}];

        questionTextList.forEach((text, i) => {
            html += `
                <div class="question-card" id="q-${i}">
                    <div class="q-text">${i+1}. ${text}</div>
                    <div class="options-group">
                        ${opts.map(o => `
                            <label class="option-item">
                                <input type="radio" name="q${i}" value="${o.v}" onchange="handleAns(${i}, ${o.v})">
                                <div class="option-box">
                                    <span class="option-val">${o.v}</span>
                                    <span class="option-label">${o.t}</span>
                                </div>
                            </label>
                        `).join('')}
                    </div>
                </div>
            `;
        });
        container.innerHTML = html;
    }

    function handleAns(index, val) {
        userScores[index] = val;
        const count = userScores.filter(s => s > 0).length;
        const pct = (count / 90) * 100;
        document.getElementById('progress-text').innerText = `${count} / 90`;
        document.getElementById('progress-fill').style.width = `${pct}%`;
        setTimeout(() => {
            const next = document.getElementById(`q-${index+1}`);
            if(next) next.scrollIntoView({behavior:'smooth', block:'center'});
        }, 250);
    }

    function calculateResult() {
        if(userScores.includes(0)) {
            alert("âš ï¸ è¿˜æœ‰é¢˜ç›®æœªå®Œæˆï¼Œè¯·æ£€æŸ¥è¿›åº¦ï¼");
            const idx = userScores.findIndex(s => s === 0);
            document.getElementById(`q-${idx}`).scrollIntoView({behavior:'smooth', block:'center'});
            return;
        }

        const scores = {};
        const labels = [];
        const data = [];
        for(let key in factors) {
            let sum = 0;
            factors[key].forEach(i => sum += userScores[i-1]);
            let avg = (sum / factors[key].length).toFixed(2);
            scores[key] = parseFloat(avg);
            labels.push(key);
            data.push(avg);
        }
        showReport(labels, data, scores);
    }

    function showReport(labels, data, scores) {
        document.getElementById('quiz-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');
        document.getElementById('report-date').innerText = new Date().toLocaleDateString();
        window.scrollTo(0,0);

        const ctx = document.getElementById('radarChart').getContext('2d');
        new Chart(ctx, {
            type: 'radar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'å› å­åˆ†',
                    data: data,
                    backgroundColor: 'rgba(79, 70, 229, 0.2)',
                    borderColor: '#4f46e5',
                    pointBackgroundColor: '#4f46e5',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        suggestedMin: 1, 
                        suggestedMax: 5,
                        pointLabels: { font: { size: 12 } }
                    }
                }
            }
        });

        const grid = document.getElementById('result-grid');
        let html = '';
        for(let key in scores) {
            const s = scores[key];
            let status = 'normal';
            let statusText = 'æ­£å¸¸';
            let color = 'var(--success)';
            let adviceIdx = 0;

            if(s >= 3) { status='heavy'; statusText='ä¸­é‡åº¦'; color='var(--danger)'; adviceIdx=s>=4?3:2; }
            else if(s >= 2) { status='mild'; statusText='è½»åº¦'; color='var(--warning)'; adviceIdx=1; }

            const info = interpretations[key];
            const advice = info.advice[adviceIdx];

            html += `
                <div class="factor-card status-${status}">
                    <div class="f-header">
                        <span class="f-name">${key}</span>
                        <span class="f-score" style="color:${color}">${s}</span>
                    </div>
                    <div style="font-size:0.8rem; color:#64748b;">
                        çŠ¶æ€ï¼š<span class="tag" style="background:${color}20; color:${color}">${statusText}</span>
                    </div>
                    <div class="f-desc">
                        <strong>${info.desc}</strong><br>
                        <div style="margin-top:5px; border-top:1px dashed #cbd5e1; padding-top:5px; color:#334155;">
                            ${advice}
                        </div>
                    </div>
                </div>
            `;
        }
        grid.innerHTML = html;
    }
</script>

</body>
</html>